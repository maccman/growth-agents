---
alwaysApply: true
---

# ES Module Compatibility

- Use `import`/`export` syntax, never `require`/`module.exports`
- Entry point detection: `if (import.meta.url === \`file://${process.argv[1]}\`) { main().catch(console.error) }`
- `__dirname` equivalent: `const __dirname = path.dirname(fileURLToPath(import.meta.url))`
- Load env vars with `import { config } from 'dotenv'` then `config()` at the top
- Run scripts with `pnpm start scripts/my-script.ts` or `tsx scripts/my-script.ts`
